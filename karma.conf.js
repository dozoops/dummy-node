module.exports = function(initialConfig) {
    initialConfig.set({
        singleRun: true, // run the tests once and exit (otherwise the default behaviour is to start a test server that watches code changes and automatically runs the tests)
        reporters: ['dots', 'junit', 'coverage'], // dots prints the test results on the standard output, junit produces a Jenkins compatible test result, and coverage performs code coverage analysis
        browsers: ['Chrome'], // Browser to run the tests on (TODO Use Phantomjs on dev)
        frameworks: ['jasmine'], // Framework to load before running the tests
        files: [                                                                                                                         "./bower_components/angular/angular.js",                                                                                                                         "./bower_components/angular-route/angular-route.js",                                                                                                                         "./bower_components/angular-animate/angular-animate.js",                                                                                                                         "./bower_components/angular-messages/angular-messages.js",                                                                                                                         "./bower_components/moment/moment.js",                                                                                                                         "./bower_components/jquery/dist/jquery.js",                                                                                                                         "./bower_components/jquery-ui/jquery-ui.js",                                                                                                                         "./bower_components/underscore/underscore.js",                                                                                                                         "./bower_components/materialize/bin/materialize.js",                                                                                                                         "./bower_components/angular-resource/angular-resource.js",                                                                                                                         "./bower_components/angular-mocks/angular-mocks.js",                                                                                                                         "./config/config.local.js",                                                                                                                         "./app/scripts/app.js",                                                                                                                         "./app/scripts/app_new.js",                                                                                                                         "./app/scripts/routes.js",                                                                                                                         "./app/scripts/controllers/bugsController.js",                                                                                                                         "./app/scripts/controllers/issueController.js",                                                                                                                         "./app/scripts/controllers/issueFormController.js",                                                                                                                         "./app/scripts/controllers/menuController.js",                                                                                                                         "./app/scripts/controllers/taskboardController.js",                                                                                                                         "./app/scripts/directives/issueDirective.js",                                                                                                                         "./app/scripts/directives/issueFormDirective.js",                                                                                                                         "./app/scripts/services/httpInterceptorService.js",                                                                                                                         "./app/scripts/services/redmineService.js",                                                                                                                         "./app/scripts/utils/utils.js",                                                                                                                         "./test/unit/redmine-service.spec.js",                                                                                                                         "./test/unit/mocks/issues-mock.spec.js",                                                                                                                         "./test/unit/mocks/memberships-mock.spec.js",                                                                                                                         "./test/unit/mocks/projects-mock.spec.js",                                                                                                                         "./test/unit/mocks/update-mock.spec.js",                                                                                                                         "./test/unit/mocks/versions-mock.spec.js"                                                                                                                        ],
        preprocessors: {
            'app/**/*.js': ['coverage'] // Instrument the code of the source files
        },
        junitReporter: {
            outputFile: 'build/test/test-results.xml' // This is the file Jenkins will use
        },
        coverageReporter: {
            type: 'cobertura', // This is the format Jenkins supports
            dir: 'build/coverage/'
        }
    });
}; 